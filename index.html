<!DOCTYPE html>
<html lang="en" class="theme-dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="LAS Player - A modern HTML5 media player with playlist support and audio visualization" />
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    
    <!-- Styles -->
    <link rel="stylesheet" href="./styles/main.css" />
    
    <title>LAS Player - Modern Media Player</title>
  </head>
  
  <body>
    <!-- Theme Toggle -->
    <div class="theme-toggle">
      <button id="theme-toggle" class="control-btn" title="Toggle Theme">
        <i class="material-icons">light_mode</i>
      </button>
    </div>

    <!-- Main Player Wrapper -->
    <div class="player-wrapper">
      <!-- Player Container -->
      <div id="player-container">
        <!-- Error Overlay -->
        <div id="error-overlay" class="error-overlay hidden">
          <i class="material-icons error-icon">error_outline</i>
          <p id="error-message" class="error-message">Could not load media.</p>
        </div>

        <!-- Video Container -->
        <div class="video-container">
          <video id="video" preload="metadata">
            <track kind="subtitles" label="English" srclang="en" id="subtitle-track" />
          </video>
          
          <!-- Drop Zone (shown when no media loaded) -->
          <div id="drop-zone" class="drop-zone">
            <i class="material-icons drop-zone-icon">cloud_upload</i>
            <p class="drop-zone-text">Drop files here or click to open</p>
            <p class="drop-zone-hint">Videos, Audio files, or drag a folder</p>
            
            <div class="file-buttons">
              <button id="open-file" class="file-btn">
                <i class="material-icons">video_file</i>
                Open Files
              </button>
              <button id="open-folder" class="file-btn">
                <i class="material-icons">folder_open</i>
                Open Folder
              </button>
            </div>
          </div>
        </div>

        <!-- Audio Container (hidden by default) -->
        <div class="audio-container" id="audio-container">
          <!-- Album Art -->
          <div class="album-art-container">
            <img id="album-art" class="album-art" src="" alt="Album Art" style="display: none;" />
            <i class="material-icons album-art-placeholder">music_note</i>
          </div>
          
          <!-- Track Info -->
          <div class="track-info">
            <h2 id="track-title" class="track-title">No Track Selected</h2>
            <p id="track-artist" class="track-artist">Unknown Artist</p>
          </div>
          
          <!-- Audio Visualizer -->
          <div class="visualizer-container">
            <canvas id="visualizer-canvas" class="visualizer-canvas"></canvas>
          </div>
          
          <!-- Hidden audio element -->
          <audio id="audio" preload="metadata"></audio>
        </div>

        <!-- Controls Overlay -->
        <div id="controls" class="controls">
          <div class="controls-inner">
            <!-- Progress Bar -->
            <div class="progress-container" id="progress-container">
              <span id="progress-tooltip" class="progress-tooltip hidden">00:00</span>
              <div id="progress-bar" class="progress-bar">
                <div id="progress-buffer" class="progress-buffer"></div>
                <div id="progress-fill" class="progress-fill">
                  <div class="progress-handle"></div>
                </div>
              </div>
            </div>

            <!-- Control Buttons Row -->
            <div class="controls-row">
              <!-- Left Controls -->
              <div class="controls-left">
                <!-- Play/Pause -->
                <button id="play-pause" class="control-btn primary" title="Play/Pause (Space)">
                  <i class="material-icons">play_arrow</i>
                </button>
                
                <!-- Rewind -->
                <button id="rewind" class="control-btn" title="Rewind 10s (←)">
                  <i class="material-icons">replay_10</i>
                </button>
                
                <!-- Forward -->
                <button id="forward" class="control-btn" title="Forward 10s (→)">
                  <i class="material-icons">forward_10</i>
                </button>
                
                <!-- Previous Track -->
                <button id="prev-track" class="control-btn" title="Previous Track">
                  <i class="material-icons">skip_previous</i>
                </button>
                
                <!-- Next Track -->
                <button id="next-track" class="control-btn" title="Next Track">
                  <i class="material-icons">skip_next</i>
                </button>
                
                <!-- Volume -->
                <div class="volume-control">
                  <button id="volume-btn" class="control-btn" title="Mute (M)">
                    <i class="material-icons">volume_up</i>
                  </button>
                  <div id="volume-slider-container" class="volume-slider-container">
                    <input
                      type="range"
                      id="volume-slider"
                      class="volume-slider"
                      min="0"
                      max="1"
                      step="0.01"
                      value="1"
                      orient="vertical"
                    />
                  </div>
                </div>
                
                <!-- Time Display -->
                <div class="time-display">
                  <span id="current-time">00:00</span>
                  <span> / </span>
                  <span id="duration">00:00</span>
                </div>
              </div>

              <!-- Right Controls -->
              <div class="controls-right">
                <!-- Shuffle -->
                <button id="shuffle" class="control-btn" title="Shuffle">
                  <i class="material-icons">shuffle</i>
                </button>
                
                <!-- Repeat -->
                <button id="repeat" class="control-btn" title="Repeat">
                  <i class="material-icons">repeat</i>
                </button>
                
                <!-- Playback Speed -->
                <div class="speed-selector">
                  <button id="speed-btn" class="control-btn speed-btn" title="Playback Speed">
                    1x
                  </button>
                  <ul id="speed-options" class="speed-options hidden">
                    <li data-speed="0.25">0.25x</li>
                    <li data-speed="0.5">0.5x</li>
                    <li data-speed="0.75">0.75x</li>
                    <li data-speed="1" class="active">1x <span class="checkmark">✓</span></li>
                    <li data-speed="1.25">1.25x</li>
                    <li data-speed="1.5">1.5x</li>
                    <li data-speed="1.75">1.75x</li>
                    <li data-speed="2">2x</li>
                  </ul>
                </div>
                
                <!-- Subtitles -->
                <button id="subtitle-toggle" class="control-btn" title="Subtitles (C)" disabled>
                  <i class="material-icons">subtitles_off</i>
                </button>

                <!-- Add Subtitle File -->
                <button id="subtitle-upload" class="control-btn" title="Load Subtitles">
                  <i class="material-icons">closed_caption</i>
                </button>
                
                <!-- Picture-in-Picture -->
                <button id="pip-toggle" class="control-btn" title="Picture-in-Picture (Shift+P)" style="display: none;">
                  <i class="material-icons">picture_in_picture_alt</i>
                </button>
                
                <!-- Fullscreen -->
                <button id="fullscreen" class="control-btn" title="Fullscreen (F)">
                  <i class="material-icons">fullscreen</i>
                </button>
                
                <!-- Sidebar Toggle -->
                <button id="sidebar-toggle" class="control-btn" title="Toggle Playlist">
                  <i class="material-icons">queue_music</i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Playlist Sidebar -->
      <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
          <h3 class="sidebar-title">Playlist</h3>
          <button id="sidebar-close" class="control-btn" title="Close">
            <i class="material-icons">close</i>
          </button>
        </div>
        
        <div id="playlist" class="playlist">
          <!-- Playlist items will be dynamically added here -->
          <div class="playlist-empty">
            <i class="material-icons" style="font-size: 2rem; color: var(--color-text-muted);">queue_music</i>
            <p style="color: var(--color-text-muted); margin-top: 0.5rem;">No tracks in playlist</p>
          </div>
        </div>
      </aside>
    </div>

    <!-- Entry Point Script -->
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
